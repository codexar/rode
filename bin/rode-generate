#!/usr/bin/env node

var commander = require('commander');
var rode = require('../index');
var utils = require('./helpers/utils').utils;

commander._name = 'rode generate';
commander
	.usage('<component> <name>')
	.option('-r, --rest', 'create a REST api for this package or controller')
	.option('-f, --force', 'force on existent package')
	.parse(process.argv);

// Path
var path = utils.extractPath(commander.args) || '.';
var rootPath = utils.findRootPath(path);
var component = commander.args.shift();
var names = commander.args;

if (!names.length) {
  utils.exit('Error: The name for the new component is not defined');
}

for (var i = 0, len = names.length; i < len; i++) {
  try {
    utils.generateComponent(component.toLowerCase(), names[i], rootPath);
  } catch (e) {
    utils.exit(e);
  }
}
